<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<body>

<form th:fragment="recipeForm" th:object="${recipe}" th:action="@{/recipes}" method="post" enctype="multipart/form-data">
    <input type="hidden" th:field="*{id}" />

    <div class="mb-3">
        <label for="name" class="form-label">Recipe Name</label>
        <input type="text" id="name" class="form-control" th:field="*{name}" required>
    </div>

    <div class="mb-3">
        <label for="instructions" class="form-label">Instructions</label>
        <textarea id="instructions" class="form-control" rows="10" th:field="*{instructions}" required></textarea>
    </div>

    <div class="row mb-3">
        <div class="col-md-6">
            <label for="category" class="form-label">Category</label>
            <select id="category" class="form-select" th:field="*{category}">
                <option value="">Select a Category</option>
                <option th:each="cat : ${categories}" th:value="${cat.id}" th:text="${cat.name}"></option>
            </select>
        </div>
        <div class="col-md-6">
            <label for="cuisine" class="form-label">Cuisine</label>
            <select id="cuisine" class="form-select" th:field="*{cuisine}">
                <option value="">Select a Cuisine</option>
                <option th:each="cui : ${cuisines}" th:value="${cui.id}" th:text="${cui.name}"></option>
            </select>
        </div>
    </div>

    <div class="mb-3">
        <label for="imageFile" class="form-label">Recipe Image</label>
        <input type="file" id="imageFile" name="imageFile" class="form-control">
        <div th:if="*{id != null and imageUrl != null}" class="mt-2">
            <small>Current Image:</small><br>
            <img th:src="*{imageUrl}" alt="Current Recipe Image" style="max-height: 100px; border-radius: 8px;">
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-md-6">
            <label for="sourceUrl" class="form-label">Source URL</label>
            <input type="url" id="sourceUrl" class="form-control" th:field="*{sourceUrl}">
        </div>
        <div class="col-md-6">
            <label for="videoUrl" class="form-label">Video URL</label>
            <input type="url" id="videoUrl" class="form-control" th:field="*{videoUrl}">
        </div>
    </div>

    <button type="submit" class="btn btn-primary">Save Recipe</button>
</form>

</body>
</html>